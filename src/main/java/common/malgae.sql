-- 기존에 있던 user hajo 삭제 및 유저 추가(sys계정에서 하시고 지우세요)
DROP USER hajo CASCADE;
​
create user malgae identified by test11;
grant
create session
,resource
,create sequence
,CONNECT
,create table
,create view
,create PROCEDURE
to malgae;
​
--------------------------------------------------------------------------------
​
-- drop 문
​
drop table tb_code;
drop table tb_review;
drop table tb_bid;
drop table tb_request;
drop table tb_image;
drop table tb_partner;
drop table tb_petinfo;
drop table tb_member;
​
​
DROP SEQUENCE seq_cmmnno;
DROP SEQUENCE seq_reviewno;
DROP SEQUENCE seq_bidno;
DROP SEQUENCE seq_requestno;
DROP SEQUENCE seq_imageno;
DROP SEQUENCE seq_partnerno;
DROP SEQUENCE seq_petno;
DROP SEQUENCE seq_memberNo;
​
-----------------------------------------------------------------
​
-- 테이블 생성
​
/**
 * 2020.06.04
 * 모든 테이블에 대응하는 시퀀스 생성 완료
 * 필요 없을시, 삭제 가능
 * 오타 및 없는 컬럼이 있을 경우 수정 필요
 */
​
-- 멤버 넘버 시퀀스 생성
CREATE SEQUENCE seq_memberNo START WITH 1 INCREMENT BY 1;
​
-- 멤버 테이블 생성
CREATE TABLE tb_member (
    MEMBER_NO VARCHAR2(20) NOT NULL,
    MEMBER_NAME VARCHAR2(20) NOT NULL,
    MEMBER_ID VARCHAR2(20) NOT NULL,
    MEMBER_PW VARCHAR2(40) NOT NULL,
    MEMBER_BIRTHDATE DATE NOT NULL,
    MEMBER_EMAIL VARCHAR2(250) NOT NULL,
    MEMBER_PHONE VARCHAR2(13) NOT NULL,
    MEMBER_ZIPCODE NUMBER(5) NOT NULL,
    MEMBER_ADDRESS1 VARCHAR2(500) NOT NULL,
    MEMBER_ADDRESS2 VARCHAR2(500) NULL,
    MEMBER_LEAVE_YN CHAR(1) DEFAULT 'N',
    MEMBER_JOINDATE DATE DEFAULT SYSDATE,
    MEMBER_EXITDATE DATE DEFAULT NULL,
    MEMBER_LICENSE_NO VARCHAR2(13) DEFAULT NULL,
    MEMBER_KAKAO_ID VARCHAR2(100) DEFAULT NULL,
    MEMBER_EMAIL_CERTIFI CHAR(1) DEFAULT 'N',
    PRIMARY KEY (MEMBER_NO)
);
​
-- 펫 넘버 시퀀스 생성
CREATE SEQUENCE seq_petno START WITH 1 INCREMENT BY 1;
​
-- 펫 정보 테이블
CREATE TABLE tb_petinfo(
    MEMBER_NO VARCHAR2(20) NOT NULL,
    PET_NO VARCHAR2(20) NOT NULL,
    PET_TYPE VARCHAR2(100) NOT NULL,
    PET_NAME VARCHAR2(100) NOT NULL,
    PET_BIRTHDATE DATE DEFAULT NULL,
    PET_GENDER CHAR(1) DEFAULT NULL,
    PET_HEIGHT FLOAT(5) DEFAULT NULL,
    PET_WEIGHT FLOAT(5) DEFAULT NULL,
    PET_ID VARCHAR2(20) DEFAULT NULL,
    PET_HAIR VARCHAR2(20) DEFAULT NULL,
    PET_NEUTER CHAR(1) DEFAULT 'N',
    REGIST_DATE DATE DEFAULT SYSDATE,
    UPDATE_DATE DATE DEFAULT SYSDATE,
    PRIMARY KEY (PET_NO),
    CONSTRAINT fk_petinfo_member FOREIGN KEY (MEMBER_NO) REFERENCES tb_member(MEMBER_NO)
);
​
-- 파트너 넘버 시퀀스 생성
CREATE SEQUENCE seq_partnerno START WITH 1 INCREMENT BY 1;
​
-- 파트너 테이블 생성
CREATE TABLE tb_partner(
    PARTNER_NO VARCHAR2(20) NOT NULL,
    PARTNER_NAME VARCHAR2(20) NOT NULL,
    PARTNER_ID VARCHAR2(20) NOT NULL,
    PARTNER_PW VARCHAR2(40) NOT NULL,
    PARTNER_EMAIL VARCHAR2(250) NOT NULL,
    PARTNER_PHONE VARCHAR2(13) NOT NULL,
    PARTNER_ZIPCODE NUMBER(5) NOT NULL,
    PARTNER_ADDRESS1 VARCHAR2(500) NOT NULL,
    PARTNER_ADDRESS2 VARCHAR2(500) NULL,
    PARTNER_LEAVE_YN CHAR(1) DEFAULT 'N',
    PARTNER_JOINDATE DATE DEFAULT SYSDATE,
    PARTNER_EXITDATE DATE DEFAULT NULL,
    PARTNER_LICENSE_NO VARCHAR2(13) DEFAULT NULL,
    PRIMARY KEY (PARTNER_NO)
);
​
-- 리퀘스트 넘버 시퀀스 생성
CREATE SEQUENCE seq_requestno START WITH 1 INCREMENT BY 1;
​
-- 리퀘스트 테이블 생성
CREATE TABLE tb_request(
MEMBER_CODE VARCHAR2(20) NOT NULL,
REQUEST_NO VARCHAR2(20) NOT NULL,
REQUEST_CODE VARCHAR(10) NOT NULL,
REQUEST_USER_COMMENT long NOT NULL,
REQUEST_DATE DATE DEFAULT SYSDATE,
UPDATE_DATE DATE DEFAULT SYSDATE,
PET_NO VARCHAR2(20) NOT NULL,
PRIMARY KEY (REQUEST_NO),
CONSTRAINT fk_request_petno FOREIGN KEY (PET_NO) REFERENCES tb_petinfo(PET_NO)
);
​
-- 이미지 넘버 시퀀스 생성
CREATE SEQUENCE seq_imageno START WITH 1 INCREMENT BY 1;
​
-- 이미지 테이블 생성
CREATE TABLE tb_image(
    IMAGE_CODE VARCHAR2(20) NOT NULL,
    IMAGE_CATEGORY CHAR(1) NOT NULL,
    IMAGE_CATEGORY_CODE VARCHAR2(20) NOT NULL,
    IMAGE_RENAME VARCHAR(100) NOT NULL,
    IMAGE_ORIGINAL VARCHAR(500) NOT NULL,
    IMAGE_PATH LONG NOT NULL,
    REGIST_DATE DATE DEFAULT SYSDATE,
    UPDATE_DATE DATE DEFAULT SYSDATE,
    CONSTRAINT pk_image_code PRIMARY KEY (IMAGE_CODE, IMAGE_RENAME)
);
​
-- BID 넘버 시퀀스 생성
CREATE SEQUENCE seq_bidno START WITH 1 INCREMENT BY 1;
​
-- BID 테이블 생성
CREATE TABLE tb_BID(
PARTNER_NO VARCHAR2(20) NOT NULL,
BID_NO VARCHAR2(20) NOT NULL,
BID_PRICE NUMBER(38) NOT NULL,
BID_COMMENT LONG NOT NULL,
REGIST_DATE DATE NOT NULL,
UPDATE_DATE DATE NOT NULL,
REQUEST_NO VARCHAR2(20) NOT NULL,
PRIMARY KEY (BID_NO)
);
​
-- review 넘버 시퀀스 생성
CREATE SEQUENCE seq_reviewno START WITH 1 INCREMENT BY 1;
​
-- review 테이블 생성
CREATE TABLE tb_review(
MEMBER_NO VARCHAR2(20) NOT NULL,
BID_NO VARCHAR2(20) NOT NULL,
REVIEW_NO VARCHAR2(20) NOT NULL,
REVIEW_TOTAL CHAR(1) NOT NULL,
REVIEW_SATISFIED CHAR(1) NOT NULL,
REVIEW_TRUST CHAR(1) NOT NULL,
REVIEW_COMMENT LONG NOT NULL,
REGIST_DATE DATE NOT NULL,
UPDATE_DATE DATE NOT NULL,
PRIMARY KEY (REVIEW_NO),
CONSTRAINT fk_review_member FOREIGN KEY (MEMBER_NO) REFERENCES tb_member(MEMBER_NO),
CONSTRAINT fk_request_bidno FOREIGN KEY (BID_NO) REFERENCES tb_bid(BID_NO)
);
​
-- BID 넘버 시퀀스 생성
CREATE SEQUENCE seq_cmmnno START WITH 1 INCREMENT BY 1;
​
-- BID 테이블 생성
CREATE TABLE tb_code(
GROUP_CODE VARCHAR(100) NOT NULL,
CMMN_CODE VARCHAR(100) NOT NULL,
CMMN_NM VARCHAR(100) NOT NULL,
CMMN_YN CHAR(1) DEFAULT 'Y',
REGIST_DATE DATE DEFAULT SYSDATE,
UPDATE_DATE DATE DEFAULT SYSDATE,
CONSTRAINT pk_cmmn_code PRIMARY KEY (GROUP_CODE, CMMN_CODE)
);
​
---------------------------------------------------------------------------------------------------------
​
-- select 문
SELECT * FROM tb_member;
SELECT * FROM tb_petinfo;
SELECT * FROM tb_partner;
SELECT * FROM tb_image;
SELECT * FROM tb_request;
SELECT * FROM tb_bid;
SELECT * FROM tb_review;
SELECT * FROM tb_code;
​
--------------------------------------------------------------------------------------------------------